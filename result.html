<!doctype html>
<html lang="ja">

<head>
    <script src="jquery-3.3.1.min.js"></script>
    <meta charset="utf-8">
    <title>たれしお(resultPage)</title>
    <link rel="stylesheet" type="text/css" href="./css/style.css">
</head>

<body>
    <div class="resultPage">resultPage</div>
    <script>
        // 結果表示用クラス
        class ResultPage {
            constructor() {
                // 現在のページカウント
                this._pageCount = parseInt(sessionStorage.getItem('pageCount'));
                // 画像＆選択履歴
                this._pictureHistory = new Array();
                this._selectHistory = new Array();
                for (var i = 0; i < this._pageCount; i++) {
                    var picture = sessionStorage.getItem(i + 'page.picture');
                    this._pictureHistory.push(picture);
                    var select = sessionStorage.getItem(i + 'page.select');
                    this._selectHistory.push(select);
                    // debug
                    console.log(picture);
                    console.log(select);
                }
                // 読み込んだらデータクリアしておく
                sessionStorage.clear();
            }

            get pageCount() {
                return this._pageCount;
            }

            // 画像タグ作成
            createResultTag() {
                var tag = "";
                for (var i = 0; i < this._pageCount; i++) {
                    var picture = this._pictureHistory[i];
                    var select = this._selectHistory[i];
                    tag += (i + 1) + "品目<br>";
                    tag += "<p id=\"Neta\"><img width='20%' height='20%' src=" + picture + "></p><br>";
                    tag += "あなたは" + select + "で注文しました<br>";
                }
                return tag;
            }
        }

        // ページ処理
        var page = new ResultPage();

        // ロード
        window.onload = function () {
            // ページ作成
            var pageTag = "結果表示<hr>";
            pageTag += page.createResultTag();
            $(".resultPage").html(pageTag);
            console.log(pageTag);
        }
    </script>
</body>

</html>